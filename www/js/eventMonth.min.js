function closeModal(){backgroundModal.style.display="none",document.querySelector(".wrapper").style.filter="none"}function htmlToCsv(e,t){e+=" liste.csv";for(var n=[],l=t.querySelectorAll("table tr"),o=0;o<l.length;o++){for(var i=[],d=l[o].querySelectorAll("td, th"),r=0;r<d.length;r++)i.push(d[r].innerHTML);n.push(i.join(";"))}downloadCSV(n.join("\n"),e)}function downloadCSV(e,t){var n,l=new Blob([e],{type:"text/csv"});(n=document.createElement("a")).download=t,n.href=window.URL.createObjectURL(l),n.style.display="none",document.body.appendChild(n),n.click(),n.remove()}for(var btnSubsCount=document.querySelectorAll(".event-infos-subsCount"),btnSubscribe=document.querySelectorAll(".event-infos-subscribe"),i=0;i<btnSubscribe.length;i++)btnSubscribe[i].addEventListener("click",function(){var e=document.getElementById("subsCount"+this.id.replace("subscribe",""));"S'inscrire"==this.value?(e.style.backgroundImage="url(img/subscribe_full.svg)",e.setAttribute("value",parseInt(e.getAttribute("value"))+1),this.value="Se dÃ©sinscrire"):(e.style.backgroundImage="url(img/subscribe_empty.svg)",e.setAttribute("value",parseInt(e.getAttribute("value"))-1),this.value="S'inscrire")});for(var list=document.querySelectorAll(".event-infos-subsCount-list"),u=0;u<list.length;u++)list[u].style.maxWidth=window.innerWidth-80+"px";if(document.getElementById("fileImgModal")){var inputImgModal=document.getElementById("fileImgModal"),eventAdmin=document.querySelectorAll("[class*=event-admin]"),backgroundModal=document.querySelector(".backgroundModal"),btnDelete=document.querySelector(".modal-infos-delete");for(i=0;i<eventAdmin.length;i++)eventAdmin[i].addEventListener("click",function(){backgroundModal.style.display="flex",document.querySelector(".wrapper").style.filter="blur(5px)";var e=this.classList[1].replace("event-admin","");document.querySelector(".modal-infos-id").value=this.id,document.querySelector(".modal-infos-id-delete").value=this.id,document.querySelector(".modal-img").style.backgroundImage=document.getElementById("event-img"+e).style.backgroundImage,document.querySelector(".modal-infos-title").value=document.getElementById("event-infos-title"+e).innerHTML,document.querySelector(".modal-infos-place").value=document.getElementById("event-infos-place"+e).innerHTML,document.querySelector(".modal-infos-price").value=document.getElementById("event-infos-price"+e).innerHTML,document.querySelector(".modal-infos-date").value=document.getElementById("event-infos-date"+e).innerHTML,document.querySelector(".modal-infos-club").value=document.getElementById("event-infos-club"+e).innerHTML,document.querySelector(".modal-infos-description").value=document.getElementById("event-infos-description"+e).innerHTML});inputImgModal.addEventListener("change",function(e){var t=this.files[0].name.split(".");if(t=t[t.length-1].toLowerCase(),-1!=allowedTypes.indexOf(t)){var n=URL.createObjectURL(this.files[0]);this.parentElement.style.backgroundImage="url("+n+")"}}),document.querySelector(".modal-close").addEventListener("click",function(){closeModal()}),backgroundModal.addEventListener("click",function(e){(e.clientX<this.children[0].offsetLeft||e.clientX>this.children[0].offsetLeft+this.children[0].offsetWidth||e.clientY<this.children[0].offsetTop||e.clientY>this.children[0].offsetTop+this.children[0].offsetHeight)&&closeModal()}),btnDelete.addEventListener("click",function(e){closeModal(),document.getElementById("event"+document.querySelector(".modal-infos-id-delete").value).remove()})}for(var btnTables=document.querySelectorAll("[class*=dlToCsv]"),t=0;t<btnTables.length;t++)btnTables[t].addEventListener("click",function(){var e=this.classList[1].replace("dlToCsv","");htmlToCsv(document.getElementById("event-infos-title"+e).innerHTML,this.parentElement)});